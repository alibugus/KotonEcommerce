@model EcommerceProject.Models.CheckOutViewModel

<section class="breadcrumb-option">
    <!-- Breadcrumb Section -->
</section>

<section class="checkout spad">
    <div class="container">
        <div class="checkout__form">
            <form asp-action="PlaceOrder" asp-controller="Checkout">
                <div class="row">
                    <div class="col-lg-8 col-md-6">
                        <h6 class="checkout__title">Billing Details</h6>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>First Name<span>*</span></p>
                                    <input asp-for="FirstName" type="text" readonly>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>Last Name<span>*</span></p>
                                    <input asp-for="LastName" type="text" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="checkout__input">
                            <p>Email<span>*</span></p>
                            <input asp-for="Email" type="text" readonly>
                        </div>
                        <div class="checkout__input">
                            <p>Town/City<span>*</span></p>
                            <input asp-for="City" type="text" readonly>
                        </div>
                        <div class="checkout__input">
                            <p>Select Address<span>*</span></p>
                            <select asp-for="SelectedAddressId" asp-items="@(new SelectList(Model.SavedAddresses, "Id", "FullAddress"))">
                                <option value="0">Select an address</option>
                            </select>
                        </div>
                        <button type="button" class="site-btn" id="toggleAddressForm">Add New Address</button>
                        <div id="newAddressForm" style="display: none;">
                            <div class="checkout__input">
                                <p>Country<span>*</span></p>
                                <input asp-for="Country" type="text">
                            </div>
                            <div class="checkout__input">
                                <p>Address<span>*</span></p>
                                <input asp-for="Address" type="text" placeholder="Street Address" class="checkout__input__add">
                            </div>
                            <div class="checkout__input">
                                <p>Town/City<span>*</span></p>
                                <input asp-for="City" type="text">
                            </div>
                            <div class="checkout__input">
                                <p>Country/State<span>*</span></p>
                                <input asp-for="State" type="text">
                            </div>
                            <div class="checkout__input">
                                <p>Postcode / ZIP<span>*</span></p>
                                <input asp-for="ZipCode" type="text">
                            </div>
                        </div>
                        <div class="checkout__input">
                            <p>Order notes<span>*</span></p>
                            <input asp-for="OrderNotes" type="text" placeholder="Notes about your order, e.g. special notes for delivery.">
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="checkout__order">
                            <h4 class="order__title">Your order</h4>
                            <div class="checkout__order__products">Product <span>Total</span></div>
                            <ul class="checkout__total__products">
                                @for (var i = 0; i < Model.CartItems.Count; i++)
                                {
                                    <li>@Model.CartItems[i].Product.Name <span>@Model.CartItems[i].Quantity</span></li>
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Id" name="CartItems[@i].Product.Id" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Name" name="CartItems[@i].Product.Name" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Price" name="CartItems[@i].Product.Price" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Size" name="CartItems[@i].Product.Size" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Brand" name="CartItems[@i].Product.Brand" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.BrandId" name="CartItems[@i].Product.BrandId" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.CategoryId" name="CartItems[@i].Product.CategoryId" />
                                    <input type="hidden" asp-for="@Model.CartItems[i].Product.Color" name="CartItems[@i].Product.Color" />
                                }
                            </ul>
                            <div class="checkout__order__total">Total <span>$@Model.CartItems.Sum(ci => ci.Product.Price * ci.Quantity)</span></div>
                            <button type="submit" class="site-btn">PLACE ORDER</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

<script>
    document.getElementById('toggleAddressForm').addEventListener('click', function () {
        var newAddressForm = document.getElementById('newAddressForm');
        if (newAddressForm.style.display === 'none') {
            newAddressForm.style.display = 'block';
        } else {
            newAddressForm.style.display = 'none';
        }
    });
</script>
